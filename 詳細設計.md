# ⚙️ TODO管理アプリ 詳細設計書

## 1. システム概要

本アプリは、ユーザーが日々のタスクを登録・確認・完了・削除できるCLIベースのタスク管理システムである。  
基本設計で定義した構造をもとに、ここでは各クラス・メソッドの仕様、データ構造、処理フロー、入出力仕様を詳細化する。

---

## 2. システム構成

---

## 3. クラス詳細設計

### 3.1 Taskクラス

| 項目 | 内容 |
|------|------|
| クラス名 | `Task` |
| 役割 | タスクの1件分の情報を保持 |
| パッケージ | `model` |
| 使用箇所 | `TaskManager`, `Category` |

#### 属性

| フィールド名 | 型 | 初期値 | 説明 |
|---------------|----|--------|------|
| `title` | `String` | - | タスク名 |
| `dueDate` | `LocalDate` | - | 期限日 |
| `done` | `boolean` | `false` | 完了状態 |
| `priority` | `int` | `3` | 優先度（1:高, 2:中, 3:低） |

#### メソッド仕様

| メソッド名 | 戻り値 | 引数 | 処理概要 |
|-------------|--------|------|-----------|
| `Task(String title, LocalDate dueDate, int priority)` | - | - | コンストラクタ |
| `markDone()` | `void` | - | 完了状態をtrueに設定 |
| `isDone()` | `boolean` | - | 完了状態を返す |
| `getTitle()` | `String` | - | タイトル取得 |
| `getDueDate()` | `LocalDate` | - | 期限取得 |
| `getPriority()` | `int` | - | 優先度取得 |
| `toString()` | `String` | - | タスク情報を文字列で返す |
| `compareTo(Task other)` | `int` | - | 期限 or 優先度で比較（ソート用） |

---

### 3.2 Categoryクラス（任意）

| 項目 | 内容 |
|------|------|
| クラス名 | `Category` |
| 役割 | タスクをグループ化 |
| パッケージ | `model` |

#### 属性

| フィールド名 | 型 | 初期値 | 説明 |
|---------------|----|--------|------|
| `name` | `String` | - | カテゴリ名 |
| `tasks` | `List<Task>` | `new ArrayList<>()` | 所属タスク一覧 |

#### メソッド仕様

| メソッド名 | 戻り値 | 引数 | 処理概要 |
|-------------|--------|------|-----------|
| `addTask(Task task)` | `void` | `Task` | タスクを追加 |
| `removeTask(String title)` | `boolean` | `title` | タイトル一致タスクを削除 |
| `getTasks()` | `List<Task>` | - | 全タスクを返す |
| `sortByDueDate()` | `void` | - | 期限順にソート |
| `sortByPriority()` | `void` | - | 優先度順にソート |

---

### 3.3 TaskManagerクラス

| 項目 | 内容 |
|------|------|
| クラス名 | `TaskManager` |
| 役割 | タスクリストの管理、操作実行 |
| パッケージ | `service` |

#### 属性

| フィールド名 | 型 | 初期値 | 説明 |
|---------------|----|--------|------|
| `tasks` | `List<Task>` | `new ArrayList<>()` | 登録済みタスク一覧 |
| `fileHandler` | `FileHandler` | - | ファイル操作用オブジェクト |

#### メソッド仕様

| メソッド名 | 戻り値 | 引数 | 処理概要 |
|-------------|--------|------|-----------|
| `addTask(String title, LocalDate dueDate, int priority)` | `void` | - | 新規タスクを作成・追加 |
| `listTasks()` | `void` | - | 全タスクを一覧表示 |
| `markTaskAsDone(int index)` | `boolean` | `index` | 指定インデックスのタスクを完了 |
| `removeTask(int index)` | `boolean` | `index` | 指定インデックスのタスクを削除 |
| `sortByDueDate()` | `void` | - | タスクを期限順に並べ替え |
| `sortByPriority()` | `void` | - | タスクを優先度順に並べ替え |
| `searchTask(String keyword)` | `List<Task>` | `keyword` | タイトルにキーワードを含むタスクを抽出 |
| `saveTasks(String path)` | `void` | `path` | ファイルに保存 |
| `loadTasks(String path)` | `void` | `path` | ファイルから読み込み |

---

### 3.4 FileHandlerクラス

| 項目 | 内容 |
|------|------|
| クラス名 | `FileHandler` |
| 役割 | JSONやテキストファイルによるデータ永続化 |
| パッケージ | `util` |

#### メソッド仕様

| メソッド名 | 戻り値 | 引数 | 処理概要 |
|-------------|--------|------|-----------|
| `save(List<Task> tasks, String path)` | `void` | - | タスク一覧をJSON形式で保存 |
| `load(String path)` | `List<Task>` | - | JSONファイルから読み込み、Taskリストを生成 |

---

### 3.5 Mainクラス

| 項目 | 内容 |
|------|------|
| クラス名 | `Main` |
| 役割 | CLIインターフェース（ユーザー操作） |
| パッケージ | ルート (`src`) |

#### メイン処理フロー

1. `TaskManager` のインスタンス生成  
2. メニュー表示  
3. 入力コマンドに応じた操作分岐  
4. 各メソッド呼び出し  
5. 必要に応じてファイル保存  

---

## 4. CLI操作仕様

| コマンド | 処理内容 | 入力例 |
|----------|-----------|--------|
| 1 | タスク追加 | 「買い物」, 「2025-11-10」, 優先度「2」 |
| 2 | タスク一覧表示 | - |
| 3 | タスク完了 | タスク番号「1」 |
| 4 | タスク削除 | タスク番号「1」 |
| 5 | ソート（期限） | - |
| 6 | ソート（優先度） | - |
| 7 | 終了 | - |

---

## 5. データ永続化仕様（JSON）

### 保存形式例（`tasks.json`）

```json
[
  {
    "title": "買い物",
    "dueDate": "2025-11-10",
    "done": false,
    "priority": 2
  },
  {
    "title": "レポート提出",
    "dueDate": "2025-11-15",
    "done": true,
    "priority": 1
  }
]
Main → TaskManager.addTask() → Taskインスタンス生成 → Listに追加 → 保存
Main → TaskManager.markTaskAsDone(index) → Task.markDone() → 保存
Main → TaskManager.sortByDueDate() / sortByPriority() → Collections.sort()
